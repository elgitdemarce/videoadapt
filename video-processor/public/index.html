<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Video Processor Debug</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 600px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        #drop-zone { 
            border: 3px dashed red; 
            height: 200px; 
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin: 20px 0;
        }
        #debug-info {
            background-color: #f0f0f0;
            padding: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Video Processor Debugger</h1>
    
    <div id="drop-zone">
        Arrastra archivos MP4 aquí
    </div>

    <input type="file" id="file-input" accept="video/mp4">

    <div id="debug-info">
        <h3>Información de Depuración:</h3>
        <p id="browser-info"></p>
        <p id="event-log"></p>
        <p id="file-info"></p>
    </div>

    <script>
        // Elementos del DOM
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const browserInfoEl = document.getElementById('browser-info');
        const eventLogEl = document.getElementById('event-log');
        const fileInfoEl = document.getElementById('file-info');

        // Información del navegador
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            browserInfoEl.textContent = `Navegador: ${ua}`;
        }

        // Configurar eventos de drag and drop
        function setupDragDropEvents() {
            // Prevenir comportamiento por defecto
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    eventLogEl.textContent = `Último evento: ${eventName}`;
                }, false);
            });

            // Evento de soltar archivos
            dropZone.addEventListener('drop', (e) => {
                const files = e.dataTransfer.files;
                processFiles(files);
            }, false);

            // Evento de selección de archivo
            fileInput.addEventListener('change', (e) => {
                const files = e.target.files;
                processFiles(files);
            });

            // Evento de clic en zona de drop
            dropZone.addEventListener('click', () => {
                fileInput.click();
            });
        }

        // Procesar archivos
        function processFiles(files) {
            // Convertir FileList a array y filtrar MP4
            const mp4Files = Array.from(files).filter(file => file.type === 'video/mp4');
            
            if (mp4Files.length > 0) {
                const file = mp4Files[0];
                fileInfoEl.innerHTML = `
                    Archivo seleccionado: ${file.name}<br>
                    Tipo: ${file.type}<br>
                    Tamaño: ${(file.size / 1024 / 1024).toFixed(2)} MB
                `;
                
                // Intentar leer metadatos del video
                const video = document.createElement('video');
                video.preload = 'metadata';
                video.src = URL.createObjectURL(file);
                
                video.onloadedmetadata = function() {
                    fileInfoEl.innerHTML += `<br>
                        Resolución: ${video.videoWidth}x${video.videoHeight}<br>
                        Duración: ${video.duration} segundos
                    `;
                };
            } else {
                fileInfoEl.textContent = 'Por favor, seleccione un archivo MP4';
            }
        }

        // Inicialización
        function init() {
            getBrowserInfo();
            setupDragDropEvents();
        }

        // Ejecutar al cargar
        init();
    </script>
</body>
</html>
