<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Diagnóstico de Procesador de Video</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        #drop-zone { 
            border: 2px dashed #ccc; 
            height: 200px; 
            text-align: center; 
            padding: 20px; 
            margin: 20px 0;
        }
        #status { color: red; }
    </style>
</head>
<body>
    <h1>Diagnóstico de Procesador de Video</h1>
    
    <div id="compatibility-check"></div>
    
    <div id="drop-zone">
        Arrastra archivos MP4 aquí
    </div>
    
    <input type="file" id="file-input" accept="video/mp4">
    
    <div id="status"></div>

    <script>
        const compatibilityCheck = document.getElementById('compatibility-check');
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const statusDiv = document.getElementById('status');

        // Verificar compatibilidad del navegador
        function checkCompatibility() {
            const checks = [
                { 
                    feature: 'Drag and Drop', 
                    supported: 'draggable' in document.createElement('div') 
                },
                { 
                    feature: 'File API', 
                    supported: !!(window.File && window.FileReader && window.FileList && window.Blob) 
                },
                { 
                    feature: 'WebAssembly', 
                    supported: !!window.WebAssembly 
                }
            ];

            compatibilityCheck.innerHTML = checks.map(check => 
                `<p>${check.feature}: ${check.supported ? '✅ Soportado' : '❌ No soportado'}</p>`
            ).join('');
        }

        // Configurar eventos de drag and drop
        function setupDragDropEvents() {
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });

            dropZone.addEventListener('drop', handleDrop, false);
        }

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
            statusDiv.textContent = `Evento: ${e.type}`;
        }

        function handleDrop(e) {
            const files = e.dataTransfer.files;
            statusDiv.textContent = `Archivos dropeados: ${files.length}`;
            
            const mp4Files = [...files].filter(f => f.type === 'video/mp4');
            
            if (mp4Files.length > 0) {
                statusDiv.textContent = `Archivo MP4 detectado: ${mp4Files[0].name}`;
            } else {
                statusDiv.textContent = 'Por favor, suelte un archivo MP4';
            }
        }

        // Soporte de selección de archivo por clic
        fileInput.addEventListener('change', (e) => {
            const files = e.target.files;
            statusDiv.textContent = `Archivos seleccionados: ${files.length}`;
            
            const mp4Files = [...files].filter(f => f.type === 'video/mp4');
            
            if (mp4Files.length > 0) {
                statusDiv.textContent = `Archivo MP4 seleccionado: ${mp4Files[0].name}`;
            }
        });

        // Añadir soporte de clic a zona de drop
        dropZone.addEventListener('click', () => {
            fileInput.click();
        });

        // Inicializar
        checkCompatibility();
        setupDragDropEvents();
    </script>
</body>
</html>
